require 'minitest/autorun'
require 'byebug'
require 'cnab400'

class Cnab400ItauTest < Minitest::Unit::TestCase
    def test_load_cnab400_from_a_file
        expected_ret_file = "02RETORNO01COBRANCA       893300133921        ZOOP TECNOLOGIA LTDA ME       341BANCO ITAU S.A.11051501600BPI00007120515                                                                                                                                                                                                                                                                                   000001
10219468242000132893300133921                                 00000215            157000002155             I06110515          00000215            000000000000002500003339776  000000000000000000000000000000000000000000000000000000000000000000000000000000000000002500000000000000000000000000000   12051500000000000000000000000                                                                    B2000002
10219468242000132893300133921                                 00000217            157000002171             I06110515          00000217            000000000000002500003335220  000000000000000000000000000000000000000000000000000000000000000000000000000000000000002500000000000000000000000000000   12051500000000000000000000000                                                                    B3000003
10219468242000132893300133921                                 00000218            157000002189             I06110515          00000218            000000000000002500023727813  000000000000000000000000000000000000000000000000000000000000000000000000000000000000002500000000000000000000000000000   12051500000000000000000000000                                                                    B2000004
10219468242000132893300133921                                 00000219            157000002197             I06110515          00000219            000000000000002500010422707  000000000000000000000000000000000000000000000000000000000000000000000000000000000000002500000000000000000000000000000   12051500000000000000000000000                                                                    B3000005
10219468242000132893300133921                                 00000221            157000002213             I06110515          00000221            000000000000002500034174997  000000000000000000000000000000000000000000000000000000000000000000000000000000000000002500000000000000000000000000000   12051500000000000000000000000                                                                    BL000006
10219468242000132893300133921                                 00000229            157000002296             I06110515          00000229            000000000000002500074500018  000000000000000000000000000000000000000000000000000000000000000000000000000000000000002500000000000000000000000000000   12051500000000000000000000000                                                                    B3000007
10219468242000132893300133921                                 00000231            157000002312             I06110515          00000231            000000000000002500034138315  000000000000000000000000000000000000000000000000000000000000000000000000000000000000002500000000000000000000000000000   12051500000000000000000000000                                                                    BL000008
9201341          000000000000000000000000000000          000000000000000000000000000000                                                  000000000000000000000000000000          000000000000000000000000000000000070000000700000000175000                                                                                                                                                                000009
"
        ret_file_path = File.join( "./test/ret/", "CN11055A.RET" )
        ret_file_content = Cnab400::Ret.new(ret_file_path)
        assert_equal expected_ret_file, ret_file_content.ret_file.read
    end
end